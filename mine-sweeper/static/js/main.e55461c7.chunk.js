(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(59)},55:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var r,o,n=a(0),c=a.n(n),s=a(32),i=a.n(s),p=a(5),u=a(6),l=a(8),d=a(7),b=a(9),m=a(2),h=a(11),f=a.n(h),g=Object.freeze({background:"rgb(50, 50, 80)",tileBorder:"#A800E0"}),j=a(1),v=a(3),O=Object.freeze([[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]]);!function(e){e.unstarted="unstarted",e.started="started",e.succedeed="succedeed",e.failed="failed"}(r||(r={})),function(e){e.flagged="flagged",e.exposed="exposed",e.unmarked="unmarked"}(o||(o={}));var y=function(e){function t(){var e,a;Object(p.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onRightMouseButtonClick=function(e){e.preventDefault(),a.props.flagTile(a.props.rowIndex,a.props.columnIndex)},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=[B.tile];this.props.type!==o.exposed||this.props.hasBomb||t.push(B.uncoveredTile);var a="";return this.props.type===o.unmarked?a="":this.props.type===o.flagged?a=c.a.createElement("img",{src:"assets/flag.svg",alt:"",className:Object(m.b)(B.icon)}):this.props.type===o.exposed&&(a=this.props.adjacentBombs||"",this.props.hasBomb&&(a=c.a.createElement("img",{src:"assets/mine.png",alt:"",className:Object(m.b)(B.icon)}))),c.a.createElement("div",{className:Object(m.b)(t),onContextMenu:this.onRightMouseButtonClick,onClick:function(){return e.props.onTileClick(e.props.rowIndex,e.props.columnIndex)}},a)}}]),t}(n.Component),B=m.a.create({icon:{position:"absolute",height:"100%",width:"100%",left:0,top:0},tile:{position:"relative","border-left":"1px solid ".concat(g.tileBorder),"border-top":"1px solid ".concat(g.tileBorder),height:"20px",width:"20px",":last-child":{"border-right":"1px solid ".concat(g.tileBorder)},"text-align":"center","line-height":"20px","font-family":"impact",background:"rgb(128, 128, 128)"},uncoveredTile:{background:"rgb(192, 192, 192)"}}),x=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).initialBombsCount=99,a.rowCount=20,a.columnCount=24,a.restartGame=function(){a.setState({gameState:r.unstarted,board:a.getEmptyBoard(a.rowCount,a.columnCount)})},a.onTileClick=function(e,t){if(a.state.gameState===r.unstarted){var o=a.getFilledBoard(e,t);a.setState({gameState:r.started}),a.uncoverTiles(e,t,o)}else a.state.gameState===r.started&&(a.state.board[e][t].props.hasBomb?a.gameOver():a.uncoverTiles(e,t))},a.flagTile=function(e,t){if(a.state.gameState===r.started&&a.state.board[e][t].props.type!==o.exposed){var n=Object(v.a)(a.state.board),c=n[e][t],s=o.flagged;c.props.type===o.flagged&&(s=o.unmarked),n[e][t]=Object(j.a)({},c,{props:Object(j.a)({},c.props,{type:s})}),a.setState({board:n})}},a.state={gameState:r.unstarted,board:a.getEmptyBoard(a.rowCount,a.columnCount)},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"checkForWin",value:function(e){return e.every(function(e){return e.every(function(e){return e.props.type===o.exposed||e.props.hasBomb})})}},{key:"uncoverTiles",value:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.board,n=new Set,c=new Set,s=Object(v.a)(r);n.add(e+";"+t);var i=s[e][t];i.props.hasBomb||(s[e][t]=Object(j.a)({},i,{props:Object(j.a)({},i.props,{type:o.exposed})}),i.props.adjacentBombs||O.forEach(function(r){var o=e+r[0],c=t+r[1];o<a.rowCount&&c<a.columnCount&&o>=0&&c>=0&&n.add(o+";"+c)}));for(var p=function(){var e=Object(v.a)(n)[0].split(";").map(Number),t=s[e[0]][e[1]];t.props.hasBomb||t.props.adjacentBombs||O.forEach(function(t){var r=e[0]+t[0],o=e[1]+t[1],s=r+";"+o;r<a.rowCount&&o<a.columnCount&&r>=0&&o>=0&&!c.has(s)&&n.add(s)}),t.props.hasBomb||(s[e[0]][e[1]]=Object(j.a)({},t,{props:Object(j.a)({},t.props,{type:o.exposed})})),c.add(Object(v.a)(n)[0]),n.delete(Object(v.a)(n)[0])};n.size;)p();this.checkForWin(s)&&(s=s.map(function(e){return e.map(function(e){return Object(j.a)({},e,{props:Object(j.a)({},e.props,{type:e.props.type===o.flagged?o.flagged:o.exposed})})})}),f.a.alert("You won!")),this.setState({board:s})}},{key:"updateAdjacentBombsCount",value:function(e){return e=e.map(function(t,a){return t.map(function(t,r){var o=0;return O.forEach(function(t){try{o+=e[a+t[0]][r+t[1]].props.hasBomb}catch(n){}}),Object(j.a)({},t,{props:Object(j.a)({},t.props,{adjacentBombs:o})})})})}},{key:"gameOver",value:function(){this.setState({gameState:r.failed,board:this.state.board.map(function(e){return e.map(function(e){return e.props.hasBomb?Object(j.a)({},e,{props:Object(j.a)({},e.props,{type:o.exposed})}):e})})}),f.a.alert("Game over!")}},{key:"getEmptyBoard",value:function(e,t){var a=this;return Object(v.a)(Array(e)).map(function(){return Object(v.a)(Array(t))}).map(function(e,t){return e.map(function(e,r){return c.a.createElement(y,{type:o.unmarked,hasBomb:!1,adjacentBombs:0,key:r,flagTile:a.flagTile,onTileClick:a.onTileClick,rowIndex:t,columnIndex:r})})})}},{key:"getFilledBoard",value:function(e,t){for(var a=this.getEmptyBoard(this.rowCount,this.columnCount),r=this.initialBombsCount;r;){var o=Math.ceil(Math.random()*this.columnCount)-1,n=Math.ceil(Math.random()*this.rowCount)-1,c=o===t&&e&&n,s=a[n][o];s.hasBomb||c||(s=Object(j.a)({},s,{props:Object(j.a)({},s.props,{hasBomb:!0})}),a[n][o]=s,r--)}return a=this.updateAdjacentBombsCount(a)}},{key:"render",value:function(){return c.a.createElement("div",{className:Object(m.b)(k.boardWrapper)},c.a.createElement("button",{className:Object(m.b)(k.restartGameButton),onClick:this.restartGame},"Restart"),c.a.createElement("div",null,this.state.board.map(function(e,t){return c.a.createElement("div",{className:Object(m.b)(k.row),key:t},e)})))}}]),t}(n.Component),k=m.a.create({boardWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},restartGameButton:{"margin-bottom":"20px",height:"30px",width:"60px",background:"red",color:"white","font-family":"Impact"},row:{display:"flex",":last-child > *":{"border-bottom":"1px solid ".concat(g.tileBorder)}},tile:{"border-left":"1px solid ".concat(g.tileBorder),"border-top":"1px solid ".concat(g.tileBorder),height:"20px",width:"20px",":last-child":{"border-right":"1px solid ".concat(g.tileBorder)}}}),C=function(e){function t(){return Object(p.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:Object(m.b)(w.App)},c.a.createElement(f.a,null),",",c.a.createElement(x,null))}}]),t}(n.Component),w=m.a.create({App:{height:"100vh",width:"100vw",display:"flex","align-items":"center","justify-content":"center",background:"".concat(g.background)}});a(55),a(57);i.a.render(c.a.createElement(C,null),document.getElementById("root"))}},[[33,2,1]]]);
//# sourceMappingURL=main.e55461c7.chunk.js.map